{
  "name": "re",
  "git_commit": "2b73bdb730bf1e4a1e51b9c7311e73b31c0d98f1",
  "change_types": [
    "oxcaml",
    "bugfix",
    "compatibility"
  ],
  "summary": "OxCaml portability annotations and immutable data layouts for thread safety, plus bugfix for exec_partial consistency with execp",
  "details": "- **OxCaml portability and data race freedom**:\n  - Added `@@ portable` module annotations throughout library interfaces (ast.mli, automata.mli, compile.mli, core.mli, cset.mli, etc.)\n  - Added kind annotations for immutable data types (`type t : immutable_data`) for thread-safe sharing\n  - Added `[@@unsafe_allow_any_mode_crossing]` annotations for types with mutable fields used in double-checked locking patterns\n  - Changed mutable `int array` to `int iarray` in `mark_infos.ml` for thread safety\n  - Added new `iarray.ml` module providing portable immutable array operations\n  - Added runtime5-conditional Mutex implementation that's a no-op on runtime4 (for JSOO compatibility)\n  - Changed `Hashtbl.Make` to `Hashtbl.MakePortable`, `Map.Make` to `Map.MakePortable`, `Set.Make` to `Set.MakePortable`\n  - Added `Stdlib.Obj.magic_uncontended` calls for safe initialization of shared state\n  - Changed `Positions.empty` from a value to `Positions.get_empty ()` function to avoid shared mutable state\n  - Replaced integer comparison operators with `Int.compare` for portability\n\n- **Bugfix for exec_partial**:\n  - Fixed `exec_partial` to return `Full` when pattern matches at end of input (previously returned `Partial` for patterns like `str \"hello\"` on input `\"hello\"`)\n  - Added boundary check for partial matching without groups when at end of input\n  - Added comprehensive tests for exec_partial consistency with execp\n\n- **Compatibility changes**:\n  - Removed TSAN suppressions and related CI configuration (no longer needed with proper OxCaml annotations)\n  - Simplified concurrency tests\n  - Downgraded dune-project lang from 3.15 to 3.12\n  - Added `seq` dependency\n  - Removed `js_of_ocaml` as test dependency\n  - Inlined top-level character class definitions in perl.ml to avoid portability issues\n  - Adjusted GitHub Actions versions (downgraded checkout@v5 to v4, etc.)"
}